<#assign shiro=JspTaglibs["/WEB-INF/taglib/shiro.tld"] />
<#assign base="${request.contextPath}" />

<!DOCTYPE html>
<html>
<head>

    <title>basic curd admin : <@block name="title" /></title>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
	<meta http-equiv="Cache-Control" content="no-store" />
	<meta http-equiv="Pragma" content="no-cache" />
	<meta http-equiv="Expires" content="0" />
    
    <link rel="stylesheet" type="text/css" href="${base}/resource/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="${base}/resource/css/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="${base}/resource/css/layout.min.css" />

    <script type="text/javascript" src="${base}/resource/script/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="${base}/resource/script/bootstrap.min.js"></script>
    <!--[if IE 8]>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script type="text/javascript" src="${base}/resource/script/respond.min.js"></script>
	<![endif]-->
    <script type="text/javascript" src="${base}/resource/script/jquery.validate.min.js"></script>
    <script type="text/javascript" src="${base}/resource/script/jquery.extends.min.js"></script>
    <script type="text/javascript" src="${base}/resource/script/default.config.min.js"></script>
    <@block name="head" />
</head>
<body>
	<@shiro.user>
		<div class="modal fade" id="profile-seeting" role="dialog" aria-hidden="true">
		   <div class="modal-dialog">
		     <div class="modal-content">
		     
		       <div class="modal-header">
		         <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		         <h4 class="modal-title"><span class="glyphicon glyphicon-file"></span> 系统设置</h4>
		       </div>
		       
		       <div class="modal-body">
		       
			       <ul class="nav nav-tabs tabs-left">
					  <li class="active"><a href="#user-seeting" data-toggle="tab">用户设置</a></li>
					  <li><a href="#password-seeting" data-toggle="tab">修改密码</a></li>
					</ul>
					<div class="tab-content">
						
						<div class="tab-pane fade in active" id="user-seeting">
				          	<form action="changeProfile" method="post">
				          		<div class="form-group">
									<div class="pictrue">
										<!-- <input class="form-control file-upload" type="file"> -->
										<a class="thumbnail" href="#">
											<img src="${base}/resource/image/empty.png"/>
										</a>
									</div>
								</div>
								<div class="form-group">
						   			<div class="row">
						    			<div class="col-lg-6">
											<label for="realname">真实姓名:</label> 
											<input type="text" class="form-control required" name="realname" id="realname" value="${Session['cvm'].user.realname!''}">
										</div>
										<div class="col-lg-6">
											<label for="email">电子邮箱:</label> 
											<input type="text" class="form-control required" name="email" id="email"  value="${Session['cvm'].user.email!''}">
										</div>
						   			</div>
					   			</div>
								
								<hr>
								
								<div class="text-right">
									<button type="submit" class="btn btn-success">
										<span class="glyphicon glyphicon-ok"></span> 保存
									</button>
									
									<button type="reset" class="btn btn-danger">
										<span class="glyphicon glyphicon-trash"></span> 重置
									</button>
								</div>
								
							</form>
				        </div>
			        
				        <div class="tab-pane fade in" id="password-seeting">
				        	<form action="changePassword" method="post">
				        	
								<div class="form-group">
									<label for="oldPassword">旧密码:</label> 
									<input type="password" class="form-control required" name="oldPassword" id="oldPassword" >
								</div>
								
								<div class="form-group">
									<label for="newPassword">新密码:</label> 
									<input type="password" class="form-control required" name="newPassword" id="password" >
								</div>
								
								<div class="form-group">
									<label for=confirmPassword>新密码:</label> 
									<input type="password" class="form-control required" name="confirmPassword" equalTo="#password" id="password" >
								</div>
								
								<hr>
								
								<div class="text-right">
									<button type="submit" class="btn btn-success">
										<span class="glyphicon glyphicon-ok"></span> 保存
									</button>
									
									<button type="reset" class="btn btn-danger">
										<span class="glyphicon glyphicon-trash"></span> 重置
									</button>
								</div>
								
							</form>
							
			      		</div>
					</div>
		      	
		      	</div>
		      	
		     </div>
		   </div>
		</div>
	</@shiro.user>
	
	<div class="main-container">
		
		<div class="panel panel-default border-black">
			<div class="panel-heading large heading-background">
			<@shiro.user>
				<div class="clearfix">
					<div class="profile">
						<a class="thumbnail dropdown-toggle" data-toggle="dropdown" href="#">
							<img src="${base}/resource/image/empty.png"/>
						</a>
						<ul class="dropdown-menu" role="menu">
						  <li><a href="#"  data-toggle="modal" data-target="#profile-seeting"><span class="glyphicon glyphicon-file"></span> 系统设置</a></li>
						  <li class="divider"></li>
						  <li><a href="${base}/logout"><span class="glyphicon glyphicon-log-out"></span> 退出系统</a></li>
						</ul>
					</div>
					<div class="user-info">
						${Session["cvm"].user.username}
						<span class="name">${Session["cvm"].user.realname}</span>
					</div>
				</div>
			</@shiro.user>
			</div>
			<div class="content-container">
				<div class="content-widget">
					<div class="content-widget">
						<div class="content-widget" id="content-widget">
						
							<@shiro.user>
								<nav class="navbar navbar-default navbar-static-top" role="navigation">
									<div class="collapse navbar-collapse">
										<ul class="nav navbar-nav">
											<li>
												<a href="${base}/index" >
													<span class="glyphicon glyphicon-home"></span>
													<span class="nav-title">首 页</span>
												</a>
											</li>
											<#list Session["cvm"].menusList as m>
												<li class="dropdown">
													<a href="#" class="dropdown-toggle" data-toggle="dropdown">
														<span class="glyphicon ${m.icon}"></span>
														<span class="nav-title">${m.name}</span>
													</a>
													<#if m.children?size gt 0>
														<ul class="dropdown-menu">
															
															<#list m.children as c>
															<li>
																<a href="${base}/${c.value?substring(1,c.value?length - 3)}">
																	<span class="glyphicon ${c.icon}"> </span> ${c.name}
																</a>
															</li>
															</#list>
															
														</ul>
													</#if>
												</li>
											</#list>
										</ul>
									</div>
								</nav>
							</@shiro.user>
							
							<@block name="body" />
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
